\hypertarget{CurrVelListener_8cpp}{}\doxysection{src/nodes/\+Curr\+Vel\+Listener.cpp File Reference}
\label{CurrVelListener_8cpp}\index{src/nodes/CurrVelListener.cpp@{src/nodes/CurrVelListener.cpp}}


This file contains the implementation of the Curr\+Vel\+Listener node.  


{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$termios.\+h$>$}\newline
{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$cstring$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}geometry\+\_\+msgs/\+Pose2\+D.\+h\char`\"{}}\newline
{\ttfamily \#include $<$rosserial\+\_\+terpbot/\+Message\+Parser.\+h$>$}\newline
{\ttfamily \#include $<$rpi-\/rt/rt.\+hpp$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
Include dependency graph for Curr\+Vel\+Listener.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{CurrVelListener_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static float \mbox{\hyperlink{CurrVelListener_8cpp_a7f95eba7cc6eda9f5aeacdeefe605f67}{filter\+Velocity}} (const float raw, float \&filter)
\begin{DoxyCompactList}\small\item\em Filter Velocity. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{CurrVelListener_8cpp_af2e5a8584091bc55e304c451d9e13901}{publish\+Odom}} (geometry\+\_\+msgs\+::\+Pose2D \&data, ros\+::\+Publisher \&curr\+\_\+odom\+\_\+publisher)
\begin{DoxyCompactList}\small\item\em Publishes the current odometry data to a ros topic. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{CurrVelListener_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em Main function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{CurrVelListener_8cpp_a417b18ab053907cde266bc1ef3c97c3b}{left\+Ticks}} = 0
\begin{DoxyCompactList}\small\item\em Left Motor Ticks. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{CurrVelListener_8cpp_a3d9738632b61b67f0060857f8b97f854}{right\+Ticks}} = 0
\begin{DoxyCompactList}\small\item\em Right Motor Ticks. \end{DoxyCompactList}\item 
static const constexpr float \mbox{\hyperlink{CurrVelListener_8cpp_a4dabc3cdfa974a53a35b58ac4497d3c5}{alpha}} = 0.\+7
\begin{DoxyCompactList}\small\item\em Filter constant alpha = 0.\+7. \end{DoxyCompactList}\item 
geometry\+\_\+msgs\+::\+Pose2D \mbox{\hyperlink{CurrVelListener_8cpp_a728501774eddfb0503468a74ec08cecc}{curr\+\_\+odom}}
\begin{DoxyCompactList}\small\item\em Message to store the the current odometry data, to be published on a ros topic. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains the implementation of the Curr\+Vel\+Listener node. 

\begin{DoxyAuthor}{Author}
Vedant Ranade 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{CurrVelListener_8cpp_a7f95eba7cc6eda9f5aeacdeefe605f67}\label{CurrVelListener_8cpp_a7f95eba7cc6eda9f5aeacdeefe605f67}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!filterVelocity@{filterVelocity}}
\index{filterVelocity@{filterVelocity}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{filterVelocity()}{filterVelocity()}}
{\footnotesize\ttfamily static float filter\+Velocity (\begin{DoxyParamCaption}\item[{const float}]{raw,  }\item[{float \&}]{filter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Filter Velocity. 


\begin{DoxyParams}{Parameters}
{\em raw} & \\
\hline
{\em filter} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
filtered velocity 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Filter constant alpha = 0.\+7 
\end{DoxyNote}


Definition at line 38 of file Curr\+Vel\+Listener.\+cpp.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{CurrVelListener_8cpp_a7f95eba7cc6eda9f5aeacdeefe605f67_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{CurrVelListener_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{CurrVelListener_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!main@{main}}
\index{main@{main}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Main function. 

Set the C\+PU affinity and priority for the current process

Initialize the ros node and topics

Used to store current tickrate data

Used to read lines from an input stream opened on a serial port

Used to store the current tickrate data

Definition at line 66 of file Curr\+Vel\+Listener.\+cpp.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{CurrVelListener_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{CurrVelListener_8cpp_af2e5a8584091bc55e304c451d9e13901}\label{CurrVelListener_8cpp_af2e5a8584091bc55e304c451d9e13901}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!publishOdom@{publishOdom}}
\index{publishOdom@{publishOdom}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{publishOdom()}{publishOdom()}}
{\footnotesize\ttfamily void publish\+Odom (\begin{DoxyParamCaption}\item[{geometry\+\_\+msgs\+::\+Pose2D \&}]{data,  }\item[{ros\+::\+Publisher \&}]{curr\+\_\+odom\+\_\+publisher }\end{DoxyParamCaption})}



Publishes the current odometry data to a ros topic. 

Filters left and right motor ticks, converts them to velocity , calculates the current odometry data and publishes it to a ros topic 
\begin{DoxyParams}{Parameters}
{\em data} & This contains the current tickrate raw data \\
\hline
{\em curr\+\_\+odom\+\_\+publisher} & This is the publisher object to publish the current odometry data \\
\hline
\end{DoxyParams}


Definition at line 48 of file Curr\+Vel\+Listener.\+cpp.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{CurrVelListener_8cpp_af2e5a8584091bc55e304c451d9e13901_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{CurrVelListener_8cpp_af2e5a8584091bc55e304c451d9e13901_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{CurrVelListener_8cpp_a4dabc3cdfa974a53a35b58ac4497d3c5}\label{CurrVelListener_8cpp_a4dabc3cdfa974a53a35b58ac4497d3c5}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!alpha@{alpha}}
\index{alpha@{alpha}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{alpha}{alpha}}
{\footnotesize\ttfamily const constexpr float alpha = 0.\+7\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Filter constant alpha = 0.\+7. 



Definition at line 30 of file Curr\+Vel\+Listener.\+cpp.

\mbox{\Hypertarget{CurrVelListener_8cpp_a728501774eddfb0503468a74ec08cecc}\label{CurrVelListener_8cpp_a728501774eddfb0503468a74ec08cecc}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!curr\_odom@{curr\_odom}}
\index{curr\_odom@{curr\_odom}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{curr\_odom}{curr\_odom}}
{\footnotesize\ttfamily geometry\+\_\+msgs\+::\+Pose2D curr\+\_\+odom}



Message to store the the current odometry data, to be published on a ros topic. 



Definition at line 42 of file Curr\+Vel\+Listener.\+cpp.

\mbox{\Hypertarget{CurrVelListener_8cpp_a417b18ab053907cde266bc1ef3c97c3b}\label{CurrVelListener_8cpp_a417b18ab053907cde266bc1ef3c97c3b}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!leftTicks@{leftTicks}}
\index{leftTicks@{leftTicks}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{leftTicks}{leftTicks}}
{\footnotesize\ttfamily float left\+Ticks = 0}



Left Motor Ticks. 



Definition at line 22 of file Curr\+Vel\+Listener.\+cpp.

\mbox{\Hypertarget{CurrVelListener_8cpp_a3d9738632b61b67f0060857f8b97f854}\label{CurrVelListener_8cpp_a3d9738632b61b67f0060857f8b97f854}} 
\index{CurrVelListener.cpp@{CurrVelListener.cpp}!rightTicks@{rightTicks}}
\index{rightTicks@{rightTicks}!CurrVelListener.cpp@{CurrVelListener.cpp}}
\doxysubsubsection{\texorpdfstring{rightTicks}{rightTicks}}
{\footnotesize\ttfamily float right\+Ticks = 0}



Right Motor Ticks. 



Definition at line 27 of file Curr\+Vel\+Listener.\+cpp.

